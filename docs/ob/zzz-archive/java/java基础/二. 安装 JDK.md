## 二. 安装 JDK

###### 1. 下载和安装

这里介绍 Windows 10 平台下 Oracle 的 JDK 安装

入口在哪儿？访问 oracle 官网 [Oracle | Cloud Applications and Cloud Platform](https://www.oracle.com/index.html)

![image-20220427093258473](image-20220427093258473.png)

点击 Java 后进入下面的页面

![image-20220427093503619](image-20220427093503619.png)

下载页面让我们选择版本，这里选择 Java 17，因为它是长期支持版（LTS）

* 18 虽然看着新，但实际上到 2022.9 就会被 19 取代
* 而 17 的支持会到 2024 年

接下来选择平台，这里选择 Windows，其它平台下 JDK 的安装，请关注我们后续的视频

Windows 有三个版本，第一个是解压版，后两个是安装版。初学者我建议下载解压版（有助于理解 java 程序的查找过程）

![image-20220427094108695](image-20220427094108695.png)

下载完毕后，解压到一个**没有中文和空格**的目录即可



###### 2. 配置 Path

你可以选择一个喜欢的目录，我的解压目录是 d 盘根目录下，如图所示

* 其中 bin 目录下包含的就是它所带的一些开发和运行工具
* 像 Javac.exe 还有 Java.exe 都是较为重要的，后面都会用到

![image-20220627085308756](image-20220627085308756.png)

验证安装是否成功：按快捷键 `Win + r`，输入命令提示符程序名称 `cmd`

![image-20220427095959878](image-20220427095959878.png)

出现命令提示符窗口，输入 `java -version`

```java
C:\Users\Lenovo>java
'java' 不是内部或外部命令，也不是可运行的程序
或批处理文件。
```

这是因为 cmd 程序并不知道 java 的安装位置，因此没有找到它

* 可以输入它的全路径来找到它
  * 比如，我的 java 解压到了 D:\jdk-17.0.3.1 这个目录，这时全路径就是 D:\jdk-17.0.3.1\bin\java
  * 但显然这么做比较麻烦

* 更好的方式是配置 Path【环境变量】



按快捷键 `win` 搜索【此电脑】，出现下面的界面

![image-20220504094730130](image-20220504094730130.png)

点击【属性】，找到【高级系统设置】

![image-20220504094840041](image-20220504094840041.png)

按下图箭头顺序找到**新建**，把刚才 jdk 的解压目录 + bin 补充填入，我这里是 D:\jdk-17.0.3.1\bin，全部确定。

![image-20220504095227003](image-20220504095227003.png)

> Path 环境变量的作用：
>
> * Path 环境变量中记录的是程序执行时的搜索路径
> * cmd 执行一个程序时，即使未给出完整路径，也会在 Path 环境变量列出的目录下依次查找该程序
>   * 找到了，则执行
>   * 都找不到，才报错
> * 因此对刚才的问题，只需将 java 程序的所在目录补充进 Path 环境变量

环境变量改动后，原有的 cmd 窗口是不受影响的，要想生效**必须**打开一个新的 cmd 窗口，输入 `java -version`，如果出现类似于下面的输出，表示成功

```
C:\Users\Lenovo>java -version
java version "17.0.2" 2022-01-18 LTS
Java(TM) SE Runtime Environment (build 17.0.2+8-LTS-86)
Java HotSpot(TM) 64-Bit Server VM (build 17.0.2+8-LTS-86, mixed mode, sharing)
```



###### 3. 配置 JAVA_HOME（选讲）

网上的一些教程，都会让大家配置另一个叫做 JAVA_HOME 的环境变量，代表的是 JDK 的安装根目录。

* 其实这个环境变量你可以不配，对于后续学习几乎没有影响
* 例外情况是，有的 java 程序，例如后面学到的 Tomcat 在启动时，会用到 JAVA_HOME 环境变量，但这属于个别现象，等我们学到它时再解决不迟
* 还有一个不配 JAVA_HOME 的理由：如果将来有不同的应用运行需要版本的 JDK，这时还不如不配全局 JAVA_HOME，让每个程序在启动脚本里指定自己需要的 JAVA_HOME 

出于知识的完整性，我们演示一下如何配置 JAVA_HOME，还是找到环境变量的配置窗口，在系统环境变量处点击新建，输入变量名和变量值，JAVA_HOME 名称是固定的，注意全大写，值是 JDK 的安装根目录，我这里是 D:\jdk-17.0.3.1



######## 优化

配完之后，发现 PATH 环境变量中的 D:\jdk-17.0.3.1\bin 与 JAVA_HOME 中的 D:\jdk-17.0.3.1 有一部分重复了，这样的问题是如果将来切换 jdk 版本，如果改了一处，忘记改另一处，就会造成不一致。

可以把 PATH 的取值修改为 %JAVA_HOME%\bin，其中 %JAVA_HOME% 代表引用 JAVA_HOME 环境变量的值，这样以后改动时，只需要改 JAVA_HOME 这一处就可以了